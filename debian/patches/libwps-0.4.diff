Index: calligra-2.9.6/cmake/modules/FindLibWps.cmake
===================================================================
--- calligra-2.9.6.orig/cmake/modules/FindLibWps.cmake
+++ calligra-2.9.6/cmake/modules/FindLibWps.cmake
@@ -10,16 +10,16 @@
 
 include(LibFindMacros)
 libfind_package(LIBWPS LibWpd)
-libfind_pkg_check_modules(LIBWPS_PKGCONF libwps-0.3)
+libfind_pkg_check_modules(LIBWPS_PKGCONF libwps-0.4)
 
 find_path(LIBWPS_INCLUDE_DIR
     NAMES libwps/libwps.h
     HINTS ${LIBWPS_PKGCONF_INCLUDE_DIRS} ${LIBWPS_PKGCONF_INCLUDEDIR}
-    PATH_SUFFIXES libwps-0.3
+    PATH_SUFFIXES libwps-0.4
 )
 
 find_library(LIBWPS_LIBRARY
-    NAMES wps wps-0.3
+    NAMES wps wps-0.4
     HINTS ${LIBWPS_PKGCONF_LIBRARY_DIRS} ${LIBWPS_PKGCONF_LIBDIR}
 )
 
Index: calligra-2.9.6/filters/words/works/import/WPSImport.cpp
===================================================================
--- calligra-2.9.6.orig/filters/words/works/import/WPSImport.cpp
+++ calligra-2.9.6/filters/words/works/import/WPSImport.cpp
@@ -91,7 +91,9 @@ public:
     bool isSupportedFormat(librevenge::RVNGInputStream &input)
     {
         WPSKind kind = WPS_TEXT;
-        WPSConfidence confidence = WPSDocument::isFileFormatSupported(&input, kind);
+        libwps::WPSCreator creator;
+        bool needsEncoding = false;
+        libwps::WPSConfidence confidence = libwps::WPSDocument::isFileFormatSupported(&input, kind, creator, needsEncoding);
         if (confidence == WPS_CONFIDENCE_NONE || kind != WPS_TEXT)
             return false;
         return true;
